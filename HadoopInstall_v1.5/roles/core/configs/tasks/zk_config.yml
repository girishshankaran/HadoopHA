---
  - name: Copy the Zookeeper file
    copy: 
      src: "{{ zk_path }}/conf/zoo_sample.cfg"
      dest: "{{ zk_path }}/conf/zoo.cfg"

  - name: Configure the ZK config file
    blockinfile:      
      path: "{{ zk_path }}/conf/zoo.cfg"
      block: |
        dataDir: {{ zk_data_dir }}
      
        {% for host in zknodes %}
         server.{{ hostvars[host].zookeeper_id | default(zookeeper_id) }}={{ hostvars[host]['ansible_nodename'] }}:{{ 2888 }}:{{ 3888 }}
        {% endfor %}

      
